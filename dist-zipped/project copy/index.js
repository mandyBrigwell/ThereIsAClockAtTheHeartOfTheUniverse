let screenSize,rc,mc,randomSeedValue=~~(12345*fxrand()),noiseSeedValue=~~(56789*fxrand()),gridSize=128+~~(128*fxrand()),backgroundHue=~~(360*fxrand()),symmetry=2+~~(12*fxrand());var outline,outlineDesc;function setup(){pixelDensity(1),randomSeed(randomSeedValue),noiseSeed(noiseSeedValue),screenSize=min(windowWidth,windowHeight),createCanvas(screenSize,screenSize),colorMode(HSB,360),initiate()}function initiate(){rc=createGraphics(2048,2048),rc.colorMode(HSB,360),rc.translate(rc.width/2,rc.height/2);for(var e=0;e<gridSize;e+=1)for(var i=0;i<gridSize;i+=1){var r=map(e+.5,0,gridSize,.45*-rc.width,.45*rc.width),n=map(i+.5,0,gridSize,.45*-rc.width,.45*rc.width);rc.push(),rc.translate(r,n),rc.noStroke(),rc.stroke(outline,180),rc.strokeWeight(1);var a=map(noise(e/10,i/10),0,1,30,330),c=map(noise(i,e),0,1,rc.width/gridSize*.1,rc.width/gridSize*.75),t=map(noise(2*e,2*i),0,1,-32,32),o=map(noise(8+2*e,8+2*i),0,1,-32,32);rc.fill(a),rc.ellipse(t,o,c,c),rc.pop()}for(mc=createGraphics(2048,2048),mc.colorMode(HSB,360),mc.background(backgroundHue,180,180),mc.translate(1024,1024),mc.scale(sqrt(2)),e=1;e<gridSize;e+=.25){var d=2048/e;mc.image(rc,-d/2,-d/2,d,d),mc.rotate(PI/symmetry)}}function draw(){image(mc,0,0,screenSize,screenSize),noLoop(),fxpreview()}function keyPressed(){"s"==key&&mc.save("Canvas")}function windowResized(){-1==navigator.userAgent.indexOf("HeadlessChrome")&&(screenSize=min(windowWidth,windowHeight),resizeCanvas(screenSize,screenSize))}fxrand()<.5?(outline=128,outlineDesc="Mid-gray"):fxrand()<.25?(outline=0,outlineDesc="Light"):(outline=360,outlineDesc="Dark"),window.$fxhashFeatures={Symmetry:symmetry,"Star outline":outlineDesc,"Star multiplication":gridSize};